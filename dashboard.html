<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Receiving & Checker - Monitoring System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Skema warna hitam‚Äìputih minimal */
    :root {
      --ink: #111;         /* teks utama */
      --ink-soft: #4b5563; /* teks sekunder */
      --paper: #fff;       /* background */
      --line: #e5e7eb;     /* garis pemisah */
    }
    body { color: var(--ink); background: var(--paper); }
    /* Tanpa @apply ‚Äî CSS murni */
    .btn{
      padding:.5rem 1rem;border:1px solid #000;border-radius:.5rem;background:#fff;color:#000;
      transition:background-color .2s,color .2s
    }
    .btn:hover{background:#000;color:#fff}
    .btn-ghost{
      padding:.5rem 1rem;border:1px solid transparent;border-radius:.5rem;background:transparent;color:#000;
      transition:background-color .2s
    }
    .btn-ghost:hover{background:#f3f4f6}
    .badge{
      display:inline-flex;align-items:center;padding:.125rem .5rem;border-radius:.375rem;border:1px solid #000;font-size:.75rem
    }
    .badge-standby{border-color:#9ca3af;color:#374151}
    .badge-proses{border-color:#000;color:#000}
    .badge-selesai{background:#111;border-color:#111;color:#fff}
    .card{background:#fff;border:1px solid var(--line);border-radius:.75rem;padding:1.25rem;box-shadow:0 1px 2px rgba(0,0,0,.03)}
    .tab{
      flex:1;text-align:center;padding:.75rem;border:1px solid var(--line);border-radius:.5rem;
      transition:background-color .2s
    }
    .tab:hover{background:#f3f4f6}
    .tab-active{background:#000 !important;color:#fff !important}
    .btn,.btn-ghost,.tab{cursor:pointer}
  </style>
</head>
<body class="min-h-screen">
  <!-- Header -->
  <header class="border-b border-[color:var(--line)]">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <div class="text-xl font-bold tracking-tight">Monitoring System</div>
        <span class="text-sm text-[color:var(--ink-soft)]">/ Antrian Unit</span>
      </div>
      <div class="flex items-center gap-4">
        <span class="text-sm">üë§ <span id="currentUser">User</span></span>
        <a href="#" class="btn-ghost logout-btn">Logout</a>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Nav Mode -->
    <div class="mb-6 flex gap-3">
      <button id="nav-receiving" class="btn-ghost">Receiving</button>
      <button id="nav-checker" class="btn">Checker</button>
      <div class="ml-auto">
        <button id="reloadBtn" class="btn">Reload Data</button>
      </div>
    </div>

    <!-- RECEIVING -->
    <section id="receiving-page" class="hidden">
      <!-- Filter Unit Type -->
      <div class="card mb-6">
        <div class="flex gap-2">
          <button data-rec="PISANG" class="tab tab-active">PISANG</button>
          <button data-rec="LOKAL" class="tab">LOKAL</button>
          <button data-rec="FMCG" class="tab">FMCG</button>
          <button data-rec="IMPORT" class="tab">IMPORT</button>
        </div>
      </div>

      <div class="card">
        <div class="flex items-center justify-between mb-4">
          <h2 id="receiving-title" class="text-lg font-semibold tracking-tight">Unit PISANG</h2>
          <div class="text-sm text-[color:var(--ink-soft)]">Klik ‚ÄúPANGGIL‚Äù / upload Surat Jalan</div>
        </div>
        <div id="receiving-units" class="space-y-4"></div>
        <div id="receiving-empty" class="hidden text-center text-[color:var(--ink-soft)] py-10">Tidak ada data.</div>
      </div>
    </section>

    <!-- CHECKER -->
    <section id="checker-page">
      <!-- Filter Jenis Muatan -->
      <div class="card mb-6">
        <div class="flex flex-wrap items-center gap-2">
          <button data-filter="ALL" class="tab tab-active">SEMUA</button>
          <button data-filter="PISANG" class="tab">PISANG <span id="count-pisang" class="ml-1 badge badge-standby">0</span></button>
          <button data-filter="LOKAL" class="tab">LOKAL <span id="count-lokal" class="ml-1 badge badge-standby">0</span></button>
          <button data-filter="FMCG" class="tab">FMCG <span id="count-fmcg" class="ml-1 badge badge-standby">0</span></button>
          <button data-filter="IMPORT" class="tab">IMPORT <span id="count-import" class="ml-1 badge badge-standby">0</span></button>
        </div>
      </div>

      <!-- Tabs Status -->
      <div class="card mb-6">
        <div class="flex gap-2">
          <button data-tab="standby" class="tab tab-active">Standby</button>
          <button data-tab="proses" class="tab">Proses</button>
          <button data-tab="selesai" class="tab">Selesai</button>
        </div>
      </div>

      <!-- Lists -->
      <div id="standby-section" class="space-y-4">
        <div id="standby-queue" class="space-y-4"></div>
        <div id="standby-empty" class="hidden text-center text-[color:var(--ink-soft)] py-10">Tidak ada unit dalam standby.</div>
      </div>

      <div id="proses-section" class="hidden space-y-4">
        <div id="proses-queue" class="space-y-4"></div>
        <div id="proses-empty" class="hidden text-center text-[color:var(--ink-soft)] py-10">Tidak ada unit dalam proses.</div>
      </div>

      <div id="selesai-section" class="hidden space-y-4">
        <div id="selesai-queue" class="space-y-4"></div>
        <div id="selesai-empty" class="hidden text-center text-[color:var(--ink-soft)] py-10">Belum ada unit selesai.</div>
      </div>
    </section>
  </main>

  <!-- Scripts -->
  <script src="auth.js"></script>
  <script src="script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (auth.requireAuth()) {
        auth.updateUserInfo();
        window.app = new MonitoringSystem(); // init app
      }
    });
  </script>
</body>
</html>
