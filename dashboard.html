<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Receiving & Checker - Monitoring System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Skema warna hitam‚Äìputih minimal */
    :root {
      --ink: #111;         /* teks utama */
      --ink-soft: #4b5563; /* teks sekunder */
      --paper: #fff;       /* background */
      --line: #e5e7eb;     /* garis pemisah */
    }
    body { color: var(--ink); background: var(--paper); }
    .btn { @apply px-4 py-2 rounded border border-black text-black bg-white hover:bg-black hover:text-white transition; }
    .btn-ghost { @apply px-4 py-2 rounded border border-transparent text-black hover:bg-gray-100 transition; }
    .badge { @apply inline-flex items-center px-2 py-0.5 rounded text-xs border; }
    .badge-standby { @apply border-gray-400 text-gray-700; }
    .badge-proses { @apply border-black text-black; }
    .badge-selesai { @apply border-gray-900 bg-gray-900 text-white; }
    .card { @apply bg-white border border-[color:var(--line)] rounded-xl p-5 shadow-sm; }
    .tab-active { @apply bg-black text-white; }
    .tab { @apply flex-1 text-center py-3 rounded border border-[color:var(--line)] hover:bg-gray-100; }
    .btn, .btn-ghost, .tab { cursor: pointer; }
    .btn:hover     { background: #111; color:#fff; }
    .btn-ghost:hover { background: #f3f4f6; } /* abu-abu muda */
    .tab:hover     { background: #f3f4f6; }
  </style>
</head>
<body class="min-h-screen">
  <!-- Header -->
  <header class="border-b border-[color:var(--line)]">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <div class="text-xl font-bold tracking-tight">Monitoring System</div>
        <span class="text-sm text-[color:var(--ink-soft)]">/ Antrian Unit</span>
      </div>
      <div class="flex items-center gap-4">
        <span class="text-sm">üë§ <span id="currentUser">User</span></span>
        <a href="#" class="btn-ghost logout-btn">Logout</a>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Nav Mode -->
    <div class="mb-6 flex gap-3">
      <button id="nav-receiving" class="btn">Receiving</button>
      <button id="nav-checker" class="btn-ghost">Checker</button>
      <div class="ml-auto">
        <button id="reloadBtn" class="btn">Reload Data</button>
      </div>
    </div>

    <!-- RECEIVING -->
    <section id="receiving-page" class="hidden">
      <!-- Filter Unit Type -->
      <div class="card mb-6">
        <div class="flex gap-2">
          <button data-rec="PISANG" class="tab tab-active">PISANG</button>
          <button data-rec="LOKAL" class="tab">LOKAL</button>
          <button data-rec="FMCG" class="tab">FMCG</button>
          <button data-rec="IMPORT" class="tab">IMPORT</button>
        </div>
      </div>

      <div class="card">
        <div class="flex items-center justify-between mb-4">
          <h2 id="receiving-title" class="text-lg font-semibold tracking-tight">Unit PISANG</h2>
          <div class="text-sm text-[color:var(--ink-soft)]">Klik ‚ÄúPANGGIL‚Äù / upload Surat Jalan</div>
        </div>
        <div id="receiving-units" class="space-y-4"></div>
        <div id="receiving-empty" class="hidden text-center text-[color:var(--ink-soft)] py-10">Tidak ada data.</div>
      </div>
    </section>

    <!-- CHECKER -->
    <section id="checker-page">
      <!-- Filter Jenis Muatan -->
      <div class="card mb-6">
        <div class="flex flex-wrap items-center gap-2">
          <button data-filter="ALL" class="tab tab-active">SEMUA</button>
          <button data-filter="PISANG" class="tab">PISANG <span id="count-pisang" class="ml-1 badge badge-standby">0</span></button>
          <button data-filter="LOKAL" class="tab">LOKAL <span id="count-lokal" class="ml-1 badge badge-standby">0</span></button>
          <button data-filter="FMCG" class="tab">FMCG <span id="count-fmcg" class="ml-1 badge badge-standby">0</span></button>
          <button data-filter="IMPORT" class="tab">IMPORT <span id="count-import" class="ml-1 badge badge-standby">0</span></button>
        </div>
      </div>

      <!-- Tabs Status -->
      <div class="card mb-6">
        <div class="flex gap-2">
          <button data-tab="standby" class="tab tab-active">Standby</button>
          <button data-tab="proses" class="tab">Proses</button>
          <button data-tab="selesai" class="tab">Selesai</button>
        </div>
      </div>

      <!-- Lists -->
      <div id="standby-section" class="space-y-4">
        <div id="standby-queue" class="space-y-4"></div>
        <div id="standby-empty" class="hidden text-center text-[color:var(--ink-soft)] py-10">Tidak ada unit dalam standby.</div>
      </div>

      <div id="proses-section" class="hidden space-y-4">
        <div id="proses-queue" class="space-y-4"></div>
        <div id="proses-empty" class="hidden text-center text-[color:var(--ink-soft)] py-10">Tidak ada unit dalam proses.</div>
      </div>

      <div id="selesai-section" class="hidden space-y-4">
        <div id="selesai-queue" class="space-y-4"></div>
        <div id="selesai-empty" class="hidden text-center text-[color:var(--ink-soft)] py-10">Belum ada unit selesai.</div>
      </div>
    </section>
  </main>

  <!-- Scripts -->
  <script src="auth.js"></script>
  <script src="script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (auth.requireAuth()) {
        auth.updateUserInfo();
        window.app = new MonitoringSystem(); // init app
      }
    });
  </script>
</body>
</html>
